{"version":3,"sources":["webpack:///./src/components/Canvas.js","webpack:///./src/helpers/canvas.helpers.js","webpack:///./src/components/Audio.js","webpack:///./src/pages/sketches/parallax-song-landscapes.js","webpack:///./src/components/Player.js","webpack:///./src/components/Sketch.js","webpack:///./src/audio/Polyglot.wav"],"names":["Canvas","_this","_len","arguments","length","args","Array","_key","_PureComponent","call","apply","this","concat","handleRef","bind","assertThisInitialized_default","width","height","canvas","ctx","getContext","window","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","ratio","devicePixelRatio","style","scale","scaleCanvas","props","innerRef","render","_this$props","delegatedProps","objectWithoutPropertiesLoose_default","react_default","a","createElement","Object","assign","ref","PureComponent","audio","Demo","_React$Component","handleAudioRef","handleCanvasRef","draw","audioContext","AudioContext","webkitAudioContext","analyser","createAnalyser","fftSize","createMediaElementSource","connect","destination","currentAudioSamples","Uint8Array","frequencyBinCount","tryStartDrawing","canvasContext","lineWidth","strokeStyle","times","requestAnimationFrame","previousImageData","getImageData","clearRect","getByteTimeDomainData","sliceWidth","size","putImageData","currentWindowWidth","beginPath","i","x","y","moveTo","lineTo","stroke","components_Canvas","Audio","src","polyglotUrl","controls","React","Component","About","className","__webpack_exports__","Sketch","demo","parallax_song_landscapes_Demo","about","parallax_song_landscapes_About","Player","state","progress","lastTickAt","tick","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1___default","componentDidMount","start","setState","Date","_this2","requestAnimationFrameId","_this2$state","now","updatedProgress","then","secondsBetween","speed","children","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","display","justifyContent","alignItems","backgroundColor","module","exports","p"],"mappings":"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","file":"component---src-pages-sketches-parallax-song-landscapes-js-e0fb693d000a00904015.js","sourcesContent":["import React, { PureComponent } from 'react'\n\nimport { scaleCanvas } from '../helpers/canvas.helpers'\n\n// type Props = {\n//   innerRef: (elem: HTMLElement) => void,\n// };\n\nclass Canvas extends PureComponent {\n  static get defaultProps () {\n    return {\n      width: 800,\n      height: 600\n    }\n  }\n\n  constructor (...args) {\n    super(...args)\n    this.handleRef = this.handleRef.bind(this)\n  }\n\n  handleRef (canvas) {\n    if (!canvas) {\n      return\n    }\n    this.canvas = canvas\n    this.ctx = canvas.getContext('2d')\n\n    scaleCanvas(this.canvas, this.ctx)\n\n    this.props.innerRef(this.canvas, this.ctx)\n  }\n\n  render () {\n    const { innerRef, ...delegatedProps } = this.props\n    return <canvas ref={this.handleRef} {...delegatedProps} />\n  }\n}\n\nexport default Canvas\n","// Figure out our backing scale.\n// This ensures canvas looks crisp on retina displays, where there are\n// in fact 4 on-screen pixels for every 1 calculated pixel.\nexport function scaleCanvas (canvas, ctx) {\n  // If we're rendering on the server, do nothing.\n  if (typeof window === 'undefined') {\n    return\n  }\n\n  const backingStoreRatio =\n    ctx.webkitBackingStorePixelRatio ||\n    ctx.mozBackingStorePixelRatio ||\n    ctx.msBackingStorePixelRatio ||\n    ctx.oBackingStorePixelRatio ||\n    ctx.backingStorePixelRatio ||\n    1\n\n  // $FlowFixMe - apparently backingStoreRatio can contain non-numbers?\n  const ratio = (window.devicePixelRatio || 1) / backingStoreRatio\n\n  if (ratio > 1) {\n    /* eslint-disable no-param-reassign */\n    canvas.style.height = `${canvas.height}px`\n    canvas.style.width = `${canvas.width}px`\n    canvas.width *= ratio\n    canvas.height *= ratio\n    /* eslint-enable */\n\n    ctx.scale(ratio, ratio)\n  }\n}\n","import React, { PureComponent } from 'react'\n\nclass Canvas extends PureComponent {\n  static get defaultProps () {\n    return {\n      innerRef: () => {}\n    }\n  }\n  constructor (...args) {\n    super(...args)\n    this.handleRef = this.handleRef.bind(this)\n  }\n\n  handleRef (audio) {\n    if (!audio) {\n      return\n    }\n    this.audio = audio\n    this.props.innerRef(audio)\n  }\n\n  render () {\n    const { innerRef, ...delegatedProps } = this.props\n    return <audio ref={this.handleRef} {...delegatedProps} />\n  }\n}\n\nexport default Canvas\n","import React from 'react'\nimport Sketch from '../../components/Sketch'\nimport Canvas from '../../components/Canvas'\nimport Player from '../../components/Player'\nimport Audio from '../../components/Audio'\nimport polyglotUrl from '../../audio/Polyglot.wav'\n\nconst size = 500\nlet times = 0\nclass Demo extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.handleAudioRef = this.handleAudioRef.bind(this)\n    this.handleCanvasRef = this.handleCanvasRef.bind(this)\n    this.draw = this.draw.bind(this)\n  }\n  handleAudioRef (audio) {\n    const audioContext = new (window.AudioContext ||\n      window.webkitAudioContext)()\n    this.analyser = audioContext.createAnalyser()\n    // this.analyser.fftSize = 2048\n    this.analyser.fftSize = 256\n\n    this.audio = audio\n    this.audioContext = audioContext\n\n    const source = audioContext.createMediaElementSource(audio)\n    source.connect(this.analyser)\n    this.analyser.connect(audioContext.destination)\n\n    this.currentAudioSamples = new Uint8Array(this.analyser.frequencyBinCount)\n    // this.allAudioSamples = new Array(10000)\n    this.tryStartDrawing()\n  }\n  handleCanvasRef (canvas) {\n    this.canvas = canvas\n    this.canvasContext = canvas.getContext('2d')\n    this.canvasContext.lineWidth = 1\n    this.canvasContext.strokeStyle = 'white'\n\n    this.tryStartDrawing()\n  }\n  tryStartDrawing () {\n    if (this.canvas && this.audio) {\n      this.draw()\n    }\n  }\n  draw () {\n    times++\n\n    // if (times > 3) return\n    window.requestAnimationFrame(this.draw)\n    const previousImageData = this.canvasContext.getImageData(0, 0, size, size)\n    this.canvasContext.clearRect(0, 0, size, size)\n    this.analyser.getByteTimeDomainData(this.currentAudioSamples)\n\n    const currentWindowWidth = size * 0.1\n    const sliceWidth = currentWindowWidth / this.currentAudioSamples.length\n\n    this.canvasContext.putImageData(\n      previousImageData,\n      currentWindowWidth * 2,\n      0\n    )\n\n    this.canvasContext.beginPath()\n    for (let i = 0; i < this.currentAudioSamples.length; i++) {\n      const x = sliceWidth * i\n      const normalizedVolume = this.currentAudioSamples[i] / 128.0\n      const y = normalizedVolume * size / 2\n\n      if (i === 0) {\n        this.canvasContext.moveTo(x, y)\n      } else {\n        this.canvasContext.lineTo(x, y)\n      }\n    }\n    // this.canvasContext.lineTo(this.canvas.width, this.canvas.height / 2)\n    this.canvasContext.stroke()\n  }\n  render () {\n    return (\n      <div>\n        <Canvas width={size} height={size} innerRef={this.handleCanvasRef} />\n        <Audio src={polyglotUrl} controls innerRef={this.handleAudioRef} />\n      </div>\n    )\n  }\n}\n\nconst About = () => (\n  <p className='major'>\n    I'm a musician and programmer.\n  </p>\n)\n\nexport default () => {\n  return <Sketch demo={<Demo />} about={<About />} />\n}\n","import React from 'react'\n\nconst secondsBetween = (now, then) => (now - then) / 1000\n\nexport default class Player extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      progress: 0,\n      lastTickAt: null\n    }\n    this.tick = this.tick.bind(this)\n  }\n  componentDidMount () {\n    this.start()\n  }\n  start () {\n    this.setState({ lastTickAt: new Date() }, this.tick)\n  }\n  tick () {\n    this.requestAnimationFrameId = window.requestAnimationFrame(() => {\n      const { lastTickAt, progress } = this.state\n      const now = new Date()\n      const secondsSinceLastTick =\n        secondsBetween(now, lastTickAt) * this.props.speed\n      const updatedProgress = progress + secondsSinceLastTick\n      this.setState({ lastTickAt: now, progress: updatedProgress }, this.tick)\n    })\n  }\n  render () {\n    return this.props.children(this.state.progress)\n  }\n}\n","import React from 'react'\n\nexport default props => {\n  if (typeof window === 'undefined') {\n    return null\n  }\n  return (\n    <div\n      style={{\n        width: '100vw',\n        height: '100vh',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: props.backgroundColor || 'black'\n      }}\n    >\n      {props.demo}\n    </div>\n  )\n}\n","module.exports = __webpack_public_path__ + \"static/Polyglot-55a64b98835fc199750890c135d3d933.wav\";"],"sourceRoot":""}